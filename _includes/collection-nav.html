{% assign collection_name = page.title | split: "(" | first %}
{% assign title_rest = page.title | split: "(" | last %}
{% assign episode_id = title_rest | split: ")" | first %}
{% assign episode_name = title_rest | split: ")" | last %}

{% if episode_id == '目录' %}
{% assign prev_id = null %}
{% assign next_id = '000' %}
{% else %}
{% assign episode_id_num = episode_id | plus: 0 %}
{% if episode_id_num == 0 %}
{% assign prev_id = '目录' %}
{% assign next_id = '001' %}
{% else %}
{% if episode_id_num == 190 %}
{% assign prev_id = ‘189’ %}
{% assign next_id = null %}
{% else %}
{% assign prev_id = episode_id_num | minus: 1 | prepend: '00' | slice: -3, 3 %}
{% assign next_id = episode_id_num | plus: 1 | prepend: '00' | slice: -3, 3 %}
{% endif %}
{% endif %}
{% endif %}

<div style="margin: 1rem 0; padding: 1rem; background: #f5f5f5; border-radius: 4px;">
  <a href="/">网站首页</a> |

  <a href="/{{ collection_name}}_目录">文集目录</a> |

  {% if prev_id %}
  <a href="/{{ collection_name}}_{{ prev_id }}">上一篇</a> |
  {% else %}
  <span>上一篇</span> |
  {% endif %}

  {% if next_id %}
  <a href="/{{ collection_name}}_{{ next_id }}">下一篇</a> |
  {% else %}
  <span>下一篇</span> |
  {% endif %}

  <a href="{{ page.external }}">外部原文</a>
</div>